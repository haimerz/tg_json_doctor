# –î–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ telebot –Ω—É–∂–Ω–æ –≤ google colab –¥–æ–±–∞–≤–∏—Ç—å: !pip install pyTelegramBotAPI
from telebot import TeleBot, types
import json

# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –±–æ—Ç–∞
bot = TeleBot(token='YOUR_TOKEN', parse_mode='html')

# –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–æ–º–∞–Ω–¥—ã '/start'
@bot.message_handler(commands=['start'])
def start_command_handler(message: types.Message):
    # –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º –æ—Ç–≤–µ—Ç –Ω–∞ –∫–æ–º–∞–Ω–¥—É '/start'
    bot.send_message(
        chat_id=message.chat.id,
        text='ü©∫ *–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ JSON-–∫–ª–∏–Ω–∏–∫—É!*\n\n'
             '–Ø –≤–∞—à –∫–æ–¥-—Ç–µ—Ä–∞–ø–µ–≤—Ç, –≥–æ—Ç–æ–≤—ã–π –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∏ –ª–µ—á–∏—Ç—å JSON-—Å—Ç—Ä–æ–∫–∏.\n\n'
             '–ü—Ä–∏—à–ª–∏—Ç–µ –º–Ω–µ JSON –¥–ª—è –æ–±—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è, –∏ —è:\n'
             '‚Ä¢ –ü—Ä–æ–≤–µ—Ä—é –µ–≥–æ –≤–∞–ª–∏–¥–Ω–æ—Å—Ç—å\n'
             '‚Ä¢ –û—Ç—Ñ–æ—Ä–º–∞—Ç–∏—Ä—É—é –¥–ª—è –ª—É—á—à–µ–π —á–∏—Ç–∞–µ–º–æ—Å—Ç–∏\n'
             '‚Ä¢ –ü–æ–¥—Å–≤–µ—á—É —Å—Ç—Ä—É–∫—Ç—É—Ä—É\n\n'
             '–ñ–¥—É –≤–∞—à–µ–≥–æ –ø–∞—Ü–∏–µ–Ω—Ç–∞ (JSON-—Å—Ç—Ä–æ–∫—É) –Ω–∞ –æ—Å–º–æ—Ç—Ä!',
        parse_mode='Markdown'
    )

# –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –≤—Å–µ—Ö –æ—Å—Ç–∞–ª—å–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
@bot.message_handler()
def message_handler(message: types.Message):
    try:
        # –ø—ã—Ç–∞–µ–º—Å—è —Ä–∞—Å–ø–∞—Ä—Å–∏—Ç—å JSON –∏–∑ —Ç–µ–∫—Å—Ç–∞ —Å–æ–æ–±—â–µ–Ω–∏—è
        payload = json.loads(message.text)
    except json.JSONDecodeError as ex:
        # –ø—Ä–∏ –æ—à–∏–±–∫–µ –≤–∑–Ω–∏–∫–Ω–µ—Ç –∏—Å–∫–ª—é—á–µ–Ω–∏–µ 'json.JSONDecodeError'
        # –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤—ã–≤–∞–µ–º –∏—Å–∫–ª—é—á–µ–Ω–∏–µ –≤ —Å—Ç—Ä–æ–∫—É –∏ –≤—ã–≤–æ–¥–∏–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
        error_msg = str(ex).replace('Expecting', '–û–∂–∏–¥–∞–µ—Ç—Å—è').replace('line', '—Å—Ç—Ä–æ–∫–∞')
        bot.send_message(
            chat_id=message.chat.id,
            text=f'üö® *–≠–∫—Å—Ç—Ä–µ–Ω–Ω—ã–π –¥–∏–∞–≥–Ω–æ–∑!*\n\n'
                 f'–û–±–Ω–∞—Ä—É–∂–µ–Ω–∞ —Å–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∞—è —Ç—Ä–∞–≤–º–∞:\n'
                 f'<code>{error_msg}</code>\n\n'
                 f'üíä –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:\n'
                 f'1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —É–∫–∞–∑–∞–Ω–Ω–æ–µ –º–µ—Å—Ç–æ\n'
                 f'2. –ò—Å–ø—Ä–∞–≤—å—Ç–µ –æ—à–∏–±–∫—É\n'
                 f'3. –ü–æ–≤—Ç–æ—Ä–∏—Ç–µ –æ—Ç–ø—Ä–∞–≤–∫—É',
            parse_mode='HTML'
        )
        # –≤—ã—Ö–æ–¥–∏–º –∏–∑ —Ñ—É–Ω–∫—Ü–∏–∏
        return
    
    # –µ—Å–ª–∏ –∏—Å–∫–ª—é—á–µ–Ω–∏—è –Ω–µ –≤–æ–∑–Ω–∏–∫–ª–æ - –∑–Ω–∞—á–∏—Ç –±—ã–ª –≤–≤–µ–¥–µ–Ω –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π JSON
    # —Ñ–æ—Ä–º–∞—Ç–∏—Ä—É–µ–º –µ–≥–æ –≤ –∫—Ä–∞—Å–∏–≤—ã–π —Ç–µ–∫—Å—Ç :) (–æ—Ç—Å—Ç—É–ø 2 –ø—Ä–æ–±–µ–ª–∞ –Ω–∞ —É—Ä–æ–≤–µ–Ω—å, —Å–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–ª—é—á–∏ –ø–æ –∞–ª—Ñ–∞–≤–∏—Ç—É)
    text = json.dumps(payload, indent=2, sort_keys=True, ensure_ascii=False)
    # –∏ –≤—ã–≤–æ–¥–∏–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
    bot.send_message(
        chat_id=message.chat.id,
        text=f'üè• *–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –æ–±—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è* üè•\n\n'
             f'‚úÖ –ü–∞—Ü–∏–µ–Ω—Ç –∞–±—Å–æ–ª—é—Ç–Ω–æ –∑–¥–æ—Ä–æ–≤!\n'
             f'üìã –ö—Ä–∞—Å–∏–≤–æ –æ—Ñ–æ—Ä–º–ª–µ–Ω–Ω—ã–π JSON:\n'
             f'<code>{text}</code>\n\n'
             f'üíâ –õ–µ—á–µ–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ –∑–∞–≤–µ—Ä—à–µ–Ω–æ!',
        parse_mode='HTML'
    )


# –≥–ª–∞–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –ø—Ä–æ–≥—Ä–∞–º–º—ã
def main():
    # –∑–∞–ø—É—Å–∫–∞–µ–º –Ω–∞—à–µ–≥–æ –±–æ—Ç–∞
    bot.infinity_polling()


if __name__ == '__main__':
    main()